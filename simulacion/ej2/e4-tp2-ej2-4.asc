Version 4
SHEET 1 1228 1272
WIRE -752 -192 -992 -192
WIRE -560 -192 -752 -192
WIRE -352 -192 -480 -192
WIRE -240 -192 -352 -192
WIRE -80 -192 -176 -192
WIRE 64 -192 -80 -192
WIRE 224 -192 128 -192
WIRE 384 -192 288 -192
WIRE 528 -192 448 -192
WIRE 528 -144 528 -192
WIRE 528 16 528 -80
WIRE 528 16 320 16
WIRE 528 64 528 16
WIRE -752 112 -752 -192
WIRE -80 144 -80 -192
WIRE -352 160 -352 -192
WIRE 320 160 320 16
WIRE 272 176 128 176
WIRE -512 240 -608 240
WIRE -400 240 -432 240
WIRE 128 272 128 256
WIRE 272 272 272 224
WIRE 272 272 128 272
WIRE 528 272 528 128
WIRE -352 320 -352 256
WIRE -352 320 -432 320
WIRE -352 352 -352 320
WIRE 320 368 320 240
WIRE 528 368 528 336
WIRE 528 368 320 368
WIRE -80 400 -80 208
WIRE 128 400 128 272
WIRE 128 400 -80 400
WIRE -752 480 -752 192
WIRE -352 480 -352 432
WIRE -352 480 -752 480
WIRE -80 480 -80 400
WIRE -80 480 -352 480
WIRE 64 480 -80 480
WIRE 320 480 144 480
WIRE 528 480 528 368
WIRE 528 480 320 480
WIRE -752 544 -752 480
WIRE 320 688 320 480
WIRE 320 688 224 688
WIRE -1360 704 -1408 704
WIRE -1216 704 -1296 704
WIRE -864 704 -1216 704
WIRE 80 704 -784 704
WIRE 160 704 80 704
WIRE 320 720 224 720
WIRE -1408 784 -1408 704
WIRE -992 784 -992 -192
WIRE 80 816 80 704
WIRE 144 816 80 816
WIRE 320 816 320 720
WIRE 320 816 224 816
WIRE -1216 848 -1216 704
WIRE -1152 848 -1216 848
WIRE -608 880 -608 240
WIRE -608 880 -832 880
WIRE 320 880 320 816
WIRE -1408 912 -1408 864
WIRE -1152 912 -1408 912
WIRE -1152 976 -1424 976
WIRE 320 992 320 960
WIRE -432 1008 -432 320
WIRE -432 1008 -832 1008
WIRE -1424 1040 -1424 976
WIRE -1376 1040 -1424 1040
WIRE -1248 1040 -1296 1040
WIRE -1152 1040 -1248 1040
WIRE -1248 1072 -1248 1040
WIRE -992 1168 -992 1104
WIRE -1248 1200 -1248 1136
FLAG -80 -192 Vout
FLAG -752 544 0
FLAG -752 -192 Vcc
FLAG 320 992 0
FLAG -1216 704 VFB
FLAG -992 1168 0
FLAG -1248 1200 0
FLAG -1408 912 Vcomp
SYMBOL voltage 128 272 R180
WINDOW 0 -68 60 Left 2
WINDOW 3 49 336 VLeft 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 5m 10n 10n 10m 20m 10)
SYMBOL sw 320 144 R0
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL diode -240 -176 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value MUR460
SYMBOL LED 224 -176 R270
WINDOW 0 72 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value LUW-W5AP
SYMBOL LED 384 -176 R270
WINDOW 0 72 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value LUW-W5AP
SYMBOL LED 512 -144 R0
SYMATTR InstName D4
SYMATTR Value LUW-W5AP
SYMBOL LED 512 64 R0
SYMATTR InstName D5
SYMATTR Value LUW-W5AP
SYMBOL LED 512 272 R0
SYMATTR InstName D6
SYMATTR Value LUW-W5AP
SYMBOL LED 64 -176 R270
WINDOW 0 72 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMATTR Value LUW-W5AP
SYMBOL res -416 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 22
SYMBOL res 160 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 0.1
SYMBOL res -1280 1024 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 7k
SYMBOL res -368 336 R0
SYMATTR InstName R4
SYMATTR Value 0.1
SYMBOL res -1392 880 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 128 832 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value 11.5k
SYMBOL res 336 976 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL res -768 688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL cap -96 144 R0
SYMATTR InstName C1
SYMATTR Value 470µ
SYMBOL voltage -752 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL ind -464 -208 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 150µ
SYMBOL nmos -400 160 R0
SYMATTR InstName M1
SYMATTR Value IRF530
SYMBOL Opamps\\opamp 192 768 R180
SYMATTR InstName U1
SYMATTR SpiceLine2 GBW=10Meg Slew=100Meg
SYMBOL PowerProducts\\LT1241 -992 944 R0
SYMATTR InstName U2
SYMBOL cap -1264 1072 R0
SYMATTR InstName C2
SYMATTR Value 1n
SYMBOL cap -1296 688 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 100n
TEXT 368 200 Left 2 !.model MYSW SW(Ron=0.1 Roff=1Meg Vt=1 Vh=-0.4)
TEXT 120 640 Left 2 !.lib opamp.sub
TEXT 584 560 Left 2 !.ic I(L1)=4.2 V(Vout)=21 V(Vcomp)=2.4
TEXT 584 592 Left 2 !.tran 0 70m 0 1n
